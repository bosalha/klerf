<!DOCTYPE html>
<html>
  <head>
    <title>Photos</title>
  </head>
  <body>
    <h1>Photos</h1>
    <div id="photos-list"></div>
    <script>
      const photosList = document.getElementById('photos-list');
      const limit = 5;
      
      async function displayPhotos() {
        try {
          const photos = await getPhotos();
          photosList.innerHTML = '';
          photos.slice(0, limit).forEach(photo => {
            const img = document.createElement('img');
            img.src = URL.createObjectURL(photo);
            photosList.appendChild(img);
          });
        } catch (error) {
          console.error(error);
        }
      }
      
      async function getPhotos() {
        const permission = await window.navigator.permissions.query({name: 'photos'});
        if (permission.state === 'granted') {
          const options = {multiple: true};
          const photos = await window.navigator.photos.select(['*'], options);
          return photos;
        } else if (permission.state === 'prompt') {
          await window.navigator.photos.requestPermission();
          return await getPhotos();
        } else {
          throw new Error('Photos permission denied');
        }
      }
      
      displayPhotos();
    </script>
  </body>
</html>
